---

- name: Copy iso image to ESXi datastore
  hosts: localhost
  vars:
      uid: !vault |
              $ANSIBLE_VAULT;1.1;AES256
              62326138323930346531376663666338613332303262666536353434643163663339383331636364
              3362623332363039646362636534613831383632353664340a613636643736393637303732633863
              61383238336133323065356535386636326438373564306636356137333265303866313839636630
              3334336462646431380a383535393633393932626164633331333338316432313362363166313034
              3931
      pwd: !vault |
              $ANSIBLE_VAULT;1.1;AES256
              65333334623165613530333262306537376664316166326665363664613463383665306336373166
              3233663735303234653863393736343833653364613466310a383232383138623863316339623539
              37633765336365333264646636653531666365323236343134306433323861373633623736623663
              3130353230393064340a636465386566363465333761333364313566383135653564313935376363
              3133
      homepath: /home/rene/Downloads/
      iso: preseed-ubuntu-18.04.2-server-amd64.iso
      esx_address: 10.10.0.96

  tasks:
      - vsphere_copy:
          host: "{{ esx_address }}"
          login: "{{ uid }}"
          password: "{{ pwd }}"
          src: "{{ homepath }}{{ iso }}"
          datacenter: '' 
          datastore: datastore1
          path: "{{ iso }}"
          validate_certs: no
        delegate_to: localhost
